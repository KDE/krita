<?xml version="1.0" encoding="utf-8"?>
<Package xmlns="http://schemas.microsoft.com/appx/manifest/foundation/windows10" xmlns:uap="http://schemas.microsoft.com/appx/manifest/uap/windows10" xmlns:uap2="http://schemas.microsoft.com/appx/manifest/uap/windows10/2" xmlns:uap3="http://schemas.microsoft.com/appx/manifest/uap/windows10/3" xmlns:uap4="http://schemas.microsoft.com/appx/manifest/uap/windows10/4" xmlns:uap6="http://schemas.microsoft.com/appx/manifest/uap/windows10/6" xmlns:uap7="http://schemas.microsoft.com/appx/manifest/uap/windows10/7" xmlns:uap8="http://schemas.microsoft.com/appx/manifest/uap/windows10/8" xmlns:uap10="http://schemas.microsoft.com/appx/manifest/uap/windows10/10" xmlns:mobile="http://schemas.microsoft.com/appx/manifest/mobile/windows10" xmlns:iot="http://schemas.microsoft.com/appx/manifest/iot/windows10" xmlns:desktop="http://schemas.microsoft.com/appx/manifest/desktop/windows10" xmlns:desktop2="http://schemas.microsoft.com/appx/manifest/desktop/windows10/2" xmlns:desktop3="http://schemas.microsoft.com/appx/manifest/desktop/windows10/3" xmlns:desktop5="http://schemas.microsoft.com/appx/manifest/desktop/windows10/5" xmlns:desktop6="http://schemas.microsoft.com/appx/manifest/desktop/windows10/6" xmlns:rescap="http://schemas.microsoft.com/appx/manifest/foundation/windows10/restrictedcapabilities" xmlns:rescap3="http://schemas.microsoft.com/appx/manifest/foundation/windows10/restrictedcapabilities/3" xmlns:rescap6="http://schemas.microsoft.com/appx/manifest/foundation/windows10/restrictedcapabilities/6" xmlns:com="http://schemas.microsoft.com/appx/manifest/com/windows10" xmlns:com2="http://schemas.microsoft.com/appx/manifest/com/windows10/2" xmlns:com3="http://schemas.microsoft.com/appx/manifest/com/windows10/3" IgnorableNamespaces="uap uap2 uap3 uap4 uap6 uap7 uap8 uap10 mobile iot desktop desktop2 desktop3 desktop5 desktop6 rescap rescap3 rescap6 com com2 com3">
  <!-- NOTE: The Publisher attr needs to match the code signing certificate. -->
  <Identity Name="49800KritaProject.Krita" Publisher="CN=03E730BB-6849-4762-9BDB-10CD7FFDB2C1" Version="4.4.3.0" ProcessorArchitecture="x64" />
  <Properties>
    <DisplayName>Krita</DisplayName>
    <PublisherDisplayName>Krita</PublisherDisplayName>
    <Description>Digital Painting, Creative Freedom!</Description>
    <Logo>Assets\StoreLogo.png</Logo>
  </Properties>
  <Resources>
    <Resource Language="en-us" />
  </Resources>
  <Dependencies>
    <!-- The manifest generated by MSIX Packaging Tool set the MinVersion to build 17763. Past packages by DAC had however been supporting build 14393. -->
    <TargetDeviceFamily Name="Windows.Desktop" MinVersion="10.0.17135.0" MaxVersionTested="10.0.18335.0" />
    <!-- The following entry existed only in the DAC-generated manifest: -->
    <!-- <PackageDependency Name="Microsoft.VCLibs.140.00.UWPDesktop" MinVersion="14.0.23810.0" Publisher="CN=Microsoft Corporation, O=Microsoft Corporation, L=Redmond, S=Washington, C=US" /> -->
  </Dependencies>
  <Capabilities>
    <rescap:Capability Name="runFullTrust" />
  </Capabilities>
  <Applications>
    <Application Id="Krita" Executable="krita\bin\krita.exe" EntryPoint="Windows.FullTrustApplication">
      <uap:VisualElements DisplayName="Krita" Description="Digital Painting, Creative Freedom!" BackgroundColor="transparent" Square150x150Logo="Assets\Square150x150Logo.png" Square44x44Logo="Assets\Square44x44Logo.png">
        <uap:DefaultTile Wide310x150Logo="Assets\Wide310x150Logo.png" Square310x310Logo="Assets\Square310x310Logo.png" Square71x71Logo="Assets\Square71x71Logo.png">
          <uap:ShowNameOnTiles>
            <uap:ShowOn Tile="square150x150Logo" />
            <uap:ShowOn Tile="wide310x150Logo" />
            <uap:ShowOn Tile="square310x310Logo" />
          </uap:ShowNameOnTiles>
        </uap:DefaultTile>
      </uap:VisualElements>
      <Extensions>
        <!-- Shell extensions: -->
        <com:Extension Category="windows.comServer">
          <com:ComServer>
            <!-- DAC generated an AppId of "1bebe119-ab16-4a21-a206-e21225842d06" which is a bit of a mystery... -->
            <com:SurrogateServer AppId="c6806289-d605-4afe-a778-bc584303db9a">
              <com:Class Id="c6806289-d605-4afe-a778-bc584303db9a" DisplayName="Krita Thumbnail Provider" Path="krita\shellex\kritashellex64.dll" ThreadingModel="STA" />
            </com:SurrogateServer>
            <!-- Skip the property handler since it just doesn't seem to work at all with Appx. -->
            <!-- <com:SurrogateServer AppId="c8e5509d-6f68-480c-8a41-db64aece94c6">
              <com:Class Id="c8e5509d-6f68-480c-8a41-db64aece94c6" DisplayName="Krita Property Handler" Path="krita\shellex\kritashellex64.dll" ThreadingModel="STA" />
            </com:SurrogateServer> -->
          </com:ComServer>
        </com:Extension>

        <!-- Krita file types: -->
        <uap3:Extension Category="windows.fileTypeAssociation">
          <uap3:FileTypeAssociation Name="kra" Parameters="&quot;%1&quot;" desktop5:ThumbnailTypeOverlay="Assets\Square44x44Logo.png">
            <uap:DisplayName>Krita Image Document</uap:DisplayName>
            <uap:Logo>Assets\fileicon.png</uap:Logo>
            <uap:SupportedFileTypes>
              <uap:FileType ContentType="application/x-krita">.kra</uap:FileType>
            </uap:SupportedFileTypes>
            <desktop2:ThumbnailHandler Clsid="c6806289-d605-4afe-a778-bc584303db9a" />
            <!-- <desktop2:DesktopPropertyHandler Clsid="c8e5509d-6f68-480c-8a41-db64aece94c6" />
            <desktop3:PropertyLists>
              <desktop3:PropertyList Property="previewDetails" Value="prop:System.DateModified;System.Size;System.DateCreated;*System.Image.Dimensions;*System.OfflineAvailability;*System.OfflineStatus;*System.SharedWith" />
              <desktop3:PropertyList Property="fullDetails" Value="prop:System.Image.Dimensions;System.Image.HorizontalSize;System.Image.VerticalSize;System.Image.HorizontalResolution;System.Image.VerticalResolution;System.PropGroup.FileSystem;System.ItemNameDisplay;System.ItemTypeText;System.ItemFolderPathDisplay;System.Size;System.DateCreated;System.DateModified;System.FileAttributes;*System.OfflineAvailability;*System.OfflineStatus;*System.SharedWith;*System.FileOwner;*System.ComputerName" />
            </desktop3:PropertyLists> -->
          </uap3:FileTypeAssociation>
        </uap3:Extension>
        <uap3:Extension Category="windows.fileTypeAssociation">
          <uap3:FileTypeAssociation Name="ora" Parameters="&quot;%1&quot;" desktop5:ThumbnailTypeOverlay="Assets\Square44x44Logo.png">
            <uap:DisplayName>OpenRaster Image Document</uap:DisplayName>
            <uap:Logo>Assets\fileicon.png</uap:Logo>
            <uap:SupportedFileTypes>
              <uap:FileType ContentType="image/openraster">.ora</uap:FileType>
            </uap:SupportedFileTypes>
            <desktop2:ThumbnailHandler Clsid="c6806289-d605-4afe-a778-bc584303db9a" />
            <!-- <desktop2:DesktopPropertyHandler Clsid="c8e5509d-6f68-480c-8a41-db64aece94c6" />
            <desktop3:PropertyLists>
              <desktop3:PropertyList Property="previewDetails" Value="prop:System.DateModified;System.Size;System.DateCreated;*System.Image.Dimensions;*System.OfflineAvailability;*System.OfflineStatus;*System.SharedWith" />
              <desktop3:PropertyList Property="fullDetails" Value="prop:System.Image.Dimensions;System.Image.HorizontalSize;System.Image.VerticalSize;System.Image.HorizontalResolution;System.Image.VerticalResolution;System.PropGroup.FileSystem;System.ItemNameDisplay;System.ItemTypeText;System.ItemFolderPathDisplay;System.Size;System.DateCreated;System.DateModified;System.FileAttributes;*System.OfflineAvailability;*System.OfflineStatus;*System.SharedWith;*System.FileOwner;*System.ComputerName" />
            </desktop3:PropertyLists> -->
          </uap3:FileTypeAssociation>
        </uap3:Extension>
        <uap3:Extension Category="windows.fileTypeAssociation">
          <uap3:FileTypeAssociation Name="kpp" Parameters="&quot;%1&quot;">
            <uap:DisplayName>Krita Brush Preset File</uap:DisplayName>
            <uap:Logo>Assets\fileicon.png</uap:Logo>
            <uap:SupportedFileTypes>
              <uap:FileType>.kpp</uap:FileType>
            </uap:SupportedFileTypes>
          </uap3:FileTypeAssociation>
        </uap3:Extension>

        <!-- Generic image types: -->
        <uap3:Extension Category="windows.fileTypeAssociation">
          <uap3:FileTypeAssociation Name="images" Parameters="&quot;%1&quot;">
            <uap:DisplayName>Image File</uap:DisplayName>
            <uap:Logo>Assets\fileicon.png</uap:Logo>
            <uap:SupportedFileTypes>
              <uap:FileType>.bmp</uap:FileType>
              <uap:FileType>.exr</uap:FileType>
              <uap:FileType>.gif</uap:FileType>
              <uap:FileType>.jpeg</uap:FileType>
              <uap:FileType>.jpg</uap:FileType>
              <uap:FileType>.png</uap:FileType>
              <uap:FileType>.psd</uap:FileType>
              <uap:FileType>.tif</uap:FileType>
              <uap:FileType>.tiff</uap:FileType>
              <uap:FileType>.xcf</uap:FileType>
            </uap:SupportedFileTypes>
          </uap3:FileTypeAssociation>
        </uap3:Extension>
      </Extensions>
    </Application>
  </Applications>
</Package>
